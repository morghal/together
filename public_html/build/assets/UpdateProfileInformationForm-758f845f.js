import{v as N,d as h,c as P,w as u,o as _,g as d,e as x,a,b as s,l as g,H as y,K as j,i as b,f as V,u as o,j as E,y as F,n as A,O as D}from"./app-b324b9d6.js";import{_ as L}from"./ActionMessage-d680d0a9.js";import{_ as O}from"./FormSection-e83cce5b.js";import{a as n,_ as c}from"./TextInput-5999e3a8.js";import{_ as r}from"./InputLabel-afe6c026.js";import{_ as R}from"./PrimaryButton-5d94ea47.js";import{_ as U}from"./SecondaryButton-13bf0c72.js";import"./SectionTitle-b4a498ee.js";import"./_plugin-vue_export-helper-c27b6911.js";const T={key:0,class:"col-span-6 sm:col-span-4"},z={class:"mt-2"},M=["src","alt"],H={class:"mt-2"},K={class:"col-span-6 sm:col-span-4"},Y={class:"col-span-6 sm:col-span-4"},q={class:"col-span-6 sm:col-span-4"},G={class:"col-span-6 sm:col-span-4"},J={key:0},Q={class:"text-sm mt-2"},W={class:"mt-2 font-medium text-sm text-green-600"},X={class:"col-span-6 sm:col-span-4"},Z={class:"col-span-6 sm:col-span-4"},ee={class:"col-span-6 sm:col-span-4"},se={class:"col-span-6 sm:col-span-4"},oe={class:"col-span-6 sm:col-span-4"},ce={__name:"UpdateProfileInformationForm",props:{user:Object},setup(f){const i=f,e=N({_method:"PUT",pseudo:i.user.pseudo,firstname:i.user.firstname,lastname:i.user.lastname,email:i.user.email,intro:i.user.intro,description:i.user.description,birth_date:i.user.birth_date,ville:i.user.ville,pays:i.user.pays,photo:null}),k=h(null),v=h(null),p=h(null),S=()=>{p.value&&(e.photo=p.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>w()})},C=()=>{k.value=!0},$=()=>{p.value.click()},I=()=>{const m=p.value.files[0];if(!m)return;const l=new FileReader;l.onload=t=>{v.value=t.target.result},l.readAsDataURL(m)},B=()=>{D.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{v.value=null,w()}})},w=()=>{var m;(m=p.value)!=null&&m.value&&(p.value.value=null)};return(m,l)=>(_(),P(O,{onSubmitted:S},{title:u(()=>[d(" Profile Information ")]),description:u(()=>[d(" Update your account's profile information and email address. ")]),form:u(()=>[m.$page.props.jetstream.managesProfilePhotos?(_(),x("div",T,[a("input",{ref_key:"photoInput",ref:p,type:"file",class:"hidden",onChange:I},null,544),s(r,{for:"photo",value:"Photo"}),g(a("div",z,[a("img",{src:f.user.profile_photo_url,alt:f.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,M)],512),[[y,!v.value]]),g(a("div",H,[a("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:j("background-image: url('"+v.value+"');")},null,4)],512),[[y,v.value]]),s(U,{class:"mt-2 mr-2",type:"button",onClick:b($,["prevent"])},{default:u(()=>[d(" Select A New Photo ")]),_:1},8,["onClick"]),f.user.profile_photo_path?(_(),P(U,{key:0,type:"button",class:"mt-2",onClick:b(B,["prevent"])},{default:u(()=>[d(" Remove Photo ")]),_:1},8,["onClick"])):V("",!0),s(n,{message:o(e).errors.photo,class:"mt-2"},null,8,["message"])])):V("",!0),a("div",K,[s(r,{for:"pseudo",value:"Pseudo"}),s(c,{id:"pseudo",modelValue:o(e).pseudo,"onUpdate:modelValue":l[0]||(l[0]=t=>o(e).pseudo=t),type:"text",class:"mt-1 block w-full",autocomplete:"username"},null,8,["modelValue"]),s(n,{message:o(e).errors.pseudo,class:"mt-2"},null,8,["message"])]),a("div",Y,[s(r,{for:"firstname",value:"Firstname"}),s(c,{id:"firstname",modelValue:o(e).name,"onUpdate:modelValue":l[1]||(l[1]=t=>o(e).name=t),type:"text",class:"mt-1 block w-full",autocomplete:"given-name"},null,8,["modelValue"]),s(n,{message:o(e).errors.firstname,class:"mt-2"},null,8,["message"])]),a("div",q,[s(r,{for:"lastname",value:"Lastname"}),s(c,{id:"lastname",modelValue:o(e).name,"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).name=t),type:"text",class:"mt-1 block w-full",autocomplete:"family-name"},null,8,["modelValue"]),s(n,{message:o(e).errors.lastname,class:"mt-2"},null,8,["message"])]),a("div",G,[s(r,{for:"email",value:"Email"}),s(c,{id:"email",modelValue:o(e).email,"onUpdate:modelValue":l[3]||(l[3]=t=>o(e).email=t),type:"email",class:"mt-1 block w-full",autocomplete:"email"},null,8,["modelValue"]),s(n,{message:o(e).errors.email,class:"mt-2"},null,8,["message"]),m.$page.props.jetstream.hasEmailVerification&&f.user.email_verified_at===null?(_(),x("div",J,[a("p",Q,[d(" Your email address is unverified. "),s(o(E),{href:m.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:b(C,["prevent"])},{default:u(()=>[d(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),g(a("div",W," A new verification link has been sent to your email address. ",512),[[y,k.value]])])):V("",!0)]),a("div",X,[s(r,{for:"intro",value:"Intro"}),s(c,{id:"name",modelValue:o(e).intro,"onUpdate:modelValue":l[4]||(l[4]=t=>o(e).intro=t),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),s(n,{message:o(e).errors.intro,class:"mt-2"},null,8,["message"])]),a("div",Z,[s(r,{for:"description",value:"Description"}),g(a("textarea",{id:"description","onUpdate:modelValue":l[5]||(l[5]=t=>o(e).description=t),maxlength:"250",class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm"},null,512),[[F,o(e).description]]),s(n,{message:o(e).errors.description,class:"mt-2"},null,8,["message"])]),a("div",ee,[s(r,{for:"birth_date",value:"Birth date"}),s(c,{id:"birth_date",modelValue:o(e).birth_date,"onUpdate:modelValue":l[6]||(l[6]=t=>o(e).birth_date=t),type:"date",class:"mt-1 block w-full",autocomplete:"bday"},null,8,["modelValue"]),s(n,{message:o(e).errors.birth_date,class:"mt-2"},null,8,["message"])]),a("div",se,[s(r,{for:"ville",value:"Ville"}),s(c,{id:"ville",modelValue:o(e).intro,"onUpdate:modelValue":l[7]||(l[7]=t=>o(e).intro=t),type:"text",class:"mt-1 block w-full",autocomplete:"address-level2"},null,8,["modelValue"]),s(n,{message:o(e).errors.ville,class:"mt-2"},null,8,["message"])]),a("div",oe,[s(r,{for:"pays",value:"Pays"}),s(c,{id:"pays",modelValue:o(e).intro,"onUpdate:modelValue":l[8]||(l[8]=t=>o(e).intro=t),type:"text",class:"mt-1 block w-full",autocomplete:"country"},null,8,["modelValue"]),s(n,{message:o(e).errors.pays,class:"mt-2"},null,8,["message"])])]),actions:u(()=>[s(L,{on:o(e).recentlySuccessful,class:"mr-3"},{default:u(()=>[d(" Saved. ")]),_:1},8,["on"]),s(R,{class:A({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:u(()=>[d(" Save ")]),_:1},8,["class","disabled"])]),_:1}))}};export{ce as default};
